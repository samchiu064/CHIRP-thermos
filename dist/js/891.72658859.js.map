{"version":3,"file":"js/891.72658859.js","mappings":"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","sources":["webpack://my-project/./src/stores/statusStore.js","webpack://my-project/./src/views/DashboardProducts.vue","webpack://my-project/./src/components/DashboardModalProduct.vue","webpack://my-project/./src/components/DashboardModalProduct.vue?044b","webpack://my-project/./src/views/DashboardProducts.vue?ef6e"],"sourcesContent":["import { defineStore } from 'pinia';\n\nexport default defineStore('statusStore', {\n  state: () => ({\n    isLoading: false,\n    cartIsShown: false,\n    cartLoadingItem: '',\n    cartDeletedItem: '',\n    cartItemIsAdded: false,\n    cartItemIsOverlaid: false,\n    couponIsApplied: false,\n    couponIsValid: false,\n    orderIsValid: false,\n    apiRequestIsFailed: false,\n    apiErrorMessage: '',\n  }),\n});\n","<template>\n  <LoadingOverlay :active=\"isLoading\" />\n  <div class=\"text-end mt-3\">\n    <button type=\"button\" class=\"btn btn-primary\" @click=\"openModal(true)\">新增產品</button>\n  </div>\n  <table class=\"table mt-4\">\n    <thead>\n      <tr>\n        <th width=\"120\">分類</th>\n        <th>產品名稱</th>\n        <th width=\"120\">原價</th>\n        <th width=\"120\">售價</th>\n        <th width=\"100\">是否啟用</th>\n        <th width=\"200\">編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"item in products\" :key=\"item.id\">\n        <td>{{ item.category }}</td>\n        <td>{{ item.title }}</td>\n        <td class=\"text-right\">{{ item.origin_price.toLocaleString('en-us') }}</td>\n        <td class=\"text-right\">{{ item.price.toLocaleString('en-us') }}</td>\n        <td>\n          <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\n          <span class=\"text-muted\" v-else>未啟用</span>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-primary btn-sm\"\n              @click=\"openModal(false, item)\"\n            >\n              編輯\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-danger btn-sm\"\n              @click=\"openDeleteModal(item)\"\n            >\n              刪除\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <ThePagination :pages=\"pagination\" @emit-page=\"getProducts\" />\n  <DashboardModalProduct\n    ref=\"productModal\"\n    :product=\"tempProduct\"\n    @update-product=\"updateProduct\"\n  />\n  <DashboardModalDelete ref=\"deleteModal\" :item=\"tempProduct\" @deleteItem=\"deleteProduct\" />\n</template>\n\n<script>\nimport {\n  apiGetProductListByPage,\n  apiPostProductItem,\n  apiPutProductItemDetail,\n  apiDeleteProduct,\n} from '@/api/admin';\nimport DashboardModalProduct from '@/components/DashboardModalProduct.vue';\nimport DashboardModalDelete from '@/components/DashboardModalDelete.vue';\nimport ThePagination from '@/components/ThePagination.vue';\n\nexport default {\n  components: {\n    DashboardModalProduct,\n    DashboardModalDelete,\n    ThePagination,\n  },\n  inject: ['pushMessageState'],\n  data() {\n    return {\n      products: [],\n      pagination: {},\n      tempProduct: {},\n      isNew: false,\n      isLoading: false,\n    };\n  },\n  methods: {\n    async getProducts(page = 1) {\n      this.isLoading = true;\n\n      try {\n        const result = await apiGetProductListByPage(page);\n\n        this.products = result.data.products;\n        this.pagination = result.data.pagination;\n\n        this.pushMessageState(result, '產品資料獲取');\n      } catch (err) {\n        this.pushMessageState(err, '產品資料獲取');\n      }\n\n      this.isLoading = false;\n    },\n    openModal(isNew, item) {\n      // Case 1: Add a new product (is NOT new); Case 2: Edit a product (is New)\n      this.tempProduct = isNew ? {} : item;\n      this.isNew = isNew;\n      this.$refs.productModal.showModal();\n    },\n    openDeleteModal(item) {\n      this.tempProduct = item;\n      this.$refs.deleteModal.showModal();\n    },\n    async updateProduct(item) {\n      this.isLoading = true;\n      this.tempProduct = item;\n\n      if (this.isNew) {\n        try {\n          const result = await apiPostProductItem({ data: this.tempProduct });\n\n          this.pushMessageState(result, '產品資料更新');\n        } catch (err) {\n          this.pushMessageState(err, '產品資料更新');\n        }\n      }\n\n      if (!this.isNew) {\n        try {\n          const result = await apiPutProductItemDetail({ data: this.tempProduct }, item.id);\n\n          this.pushMessageState(result, '產品資料更新');\n        } catch (err) {\n          this.pushMessageState(err, '產品資料更新');\n        }\n      }\n\n      this.isLoading = false;\n      this.$refs.productModal.hideModal();\n      this.getProducts();\n    },\n    async deleteProduct(item) {\n      this.isLoading = true;\n\n      try {\n        const result = await apiDeleteProduct(item.id);\n\n        this.pushMessageState(result, '產品資料刪除');\n      } catch (err) {\n        this.pushMessageState(err, '產品資料刪除');\n      }\n\n      this.isLoading = false;\n      this.$refs.deleteModal.hideModal();\n      this.getProducts();\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"exampleModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>新增產品</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-4\">\n              <div class=\"mb-3\">\n                <label for=\"image\" class=\"form-label w-100\"\n                  >輸入圖片網址\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"image\"\n                    placeholder=\"請輸入圖片連結\"\n                    v-model=\"tempProduct.imageUrl\"\n                /></label>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"majorImage\" class=\"form-label w-100\">\n                  <p>上傳主要圖片</p>\n                  <i class=\"fas fa-spinner fa-spin\"></i>\n                  <input\n                    type=\"file\"\n                    id=\"majorImage\"\n                    class=\"form-control\"\n                    @change=\"uploadFile('major')\"\n                    ref=\"majorImageInput\"\n                  />\n                </label>\n              </div>\n              <div class=\"mb-3\" v-for=\"index in 5\" :key=\"index\">\n                <label :for=\"`minorImage${index}`\" class=\"form-label w-100\">\n                  上傳次要圖片 {{ index }}\n                  <i class=\"fas fa-spinner fa-spin\"></i>\n                  <input\n                    type=\"file\"\n                    :id=\"`minorImage${index}`\"\n                    class=\"form-control\"\n                    @change=\"uploadFile('minor', index)\"\n                    ref=\"minorImageInput\"\n                  />\n                </label>\n              </div>\n            </div>\n            <div class=\"col-sm-8\">\n              <div class=\"mb-3\">\n                <label for=\"title\" class=\"form-label w-100\"\n                  >標題\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"title\"\n                    placeholder=\"請輸入標題\"\n                    v-model=\"tempProduct.title\"\n                  />\n                </label>\n              </div>\n\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"category\" class=\"form-label w-100\"\n                    >分類\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"category\"\n                      placeholder=\"請輸入分類\"\n                      v-model=\"tempProduct.category\"\n                    />\n                  </label>\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label w-100\"\n                    >單位\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"unit\"\n                      placeholder=\"請輸入單位\"\n                      v-model=\"tempProduct.unit\"\n                    />\n                  </label>\n                </div>\n              </div>\n\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"origin_price\" class=\"form-label w-100\"\n                    >原價\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"origin_price\"\n                      placeholder=\"請輸入原價\"\n                      v-model=\"tempProduct.origin_price\"\n                    />\n                  </label>\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label w-100\"\n                    >售價\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"price\"\n                      placeholder=\"請輸入售價\"\n                      v-model=\"tempProduct.price\"\n                    />\n                  </label>\n                </div>\n              </div>\n              <hr />\n\n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label w-100\"\n                  >產品描述\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"description\"\n                    placeholder=\"請輸入產品描述\"\n                    v-model=\"tempProduct.description\"\n                  ></textarea>\n                </label>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"content\" class=\"form-label w-100\"\n                  >說明內容\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"content\"\n                    placeholder=\"請輸入產品說明內容\"\n                    v-model=\"tempProduct.content\"\n                  ></textarea>\n                </label>\n              </div>\n              <div class=\"mb-3\">\n                <div class=\"form-check\">\n                  <label class=\"form-check-label\" for=\"is_enabled\">\n                    <input\n                      class=\"form-check-input\"\n                      type=\"checkbox\"\n                      :true-value=\"1\"\n                      :false-value=\"0\"\n                      id=\"is_enabled\"\n                      v-model=\"tempProduct.is_enabled\"\n                    />\n                    是否啟用\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">\n            取消\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-primary\"\n            @click=\"$emit('update-product', tempProduct)\"\n          >\n            確認\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { apiPostUploadImage } from '@/api/admin';\nimport modalMixin from '@/mixins/modalMixin';\nimport { mapWritableState } from 'pinia';\nimport statusStore from '@/stores/statusStore';\n\nexport default {\n  mixins: [modalMixin],\n  props: {\n    product: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      modal: {},\n      tempProduct: {},\n    };\n  },\n  computed: {\n    ...mapWritableState(statusStore, ['apiRequestIsFailed', 'apiErrorMessage']),\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n      if (!this.tempProduct.imagesUrl) this.tempProduct.imagesUrl = [];\n    },\n  },\n  methods: {\n    async uploadFile(type, key) {\n      const index = key - 1;\n      const uploadedFile =\n        type === 'major'\n          ? this.$refs.majorImageInput.files[0]\n          : this.$refs.minorImageInput[index].files[0];\n      const formData = new FormData();\n\n      formData.append('file-to-upload', uploadedFile);\n\n      try {\n        const result = await apiPostUploadImage(formData);\n\n        if (type === 'major') {\n          this.tempProduct.imageUrl = result.data.imageUrl;\n        } else if (type === 'minor') {\n          this.tempProduct.imagesUrl[index] = result.data.imageUrl;\n        }\n      } catch (err) {\n        this.apiRequestIsFailed = true;\n        this.apiErrorMessage = err;\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./DashboardModalProduct.vue?vue&type=template&id=52e0c14c\"\nimport script from \"./DashboardModalProduct.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardModalProduct.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\rainb\\\\Desktop\\\\vue-project\\\\CHIRP-thermos\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DashboardProducts.vue?vue&type=template&id=0dd651cc\"\nimport script from \"./DashboardProducts.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardProducts.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\rainb\\\\Desktop\\\\vue-project\\\\CHIRP-thermos\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["defineStore","state","isLoading","cartIsShown","cartLoadingItem","cartDeletedItem","cartItemIsAdded","cartItemIsOverlaid","couponIsApplied","couponIsValid","orderIsValid","apiRequestIsFailed","apiErrorMessage","class","_createElementVNode","width","_createVNode","_component_LoadingOverlay","active","$data","type","onClick","$options","_hoisted_3","_createElementBlock","_Fragment","_renderList","item","key","id","_toDisplayString","category","title","origin_price","toLocaleString","price","is_enabled","_hoisted_9","_hoisted_10","_component_ThePagination","pages","onEmitPage","_component_DashboardModalProduct","ref","product","onUpdateProduct","_component_DashboardModalDelete","onDeleteItem","tabindex","role","for","_hoisted_4","placeholder","imageUrl","$event","_hoisted_13","_hoisted_14","onChange","index","unit","_hoisted_36","description","content","_hoisted_48","_ctx","mixins","modalMixin","props","Object","default","data","modal","tempProduct","computed","mapWritableState","statusStore","watch","this","imagesUrl","methods","async","uploadedFile","$refs","majorImageInput","files","minorImageInput","formData","FormData","append","result","apiPostUploadImage","err","__exports__","components","DashboardModalProduct","DashboardModalDelete","ThePagination","inject","products","pagination","isNew","page","apiGetProductListByPage","pushMessageState","openModal","productModal","showModal","openDeleteModal","deleteModal","apiPostProductItem","apiPutProductItemDetail","hideModal","getProducts","apiDeleteProduct","created","render"],"sourceRoot":""}