{"version":3,"file":"js/768.8486825c.js","mappings":"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","sources":["webpack://my-project/./src/views/DashboardOrders.vue","webpack://my-project/./src/components/DashboardOrderList.vue","webpack://my-project/./src/components/DashboardOrderList.vue?1232","webpack://my-project/./src/views/DashboardOrders.vue?7a71"],"sourcesContent":["<template>\n  <LoadingOverlay :active=\"isLoading\" />\n  <table class=\"table mt-4\">\n    <thead>\n      <tr>\n        <th>訂單編號</th>\n        <th>Email</th>\n        <th>購買款項</th>\n        <th>應付金額</th>\n        <th>是否付款</th>\n        <th>編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(item, index) in orders\" :key=\"item + index\">\n        <td>{{ item.id }}</td>\n        <td>{{ item.user.email }}</td>\n        <td class=\"text-right\">\n          <DashboardOrderList :order=\"item\" :form=\"item.user\" />\n        </td>\n        <td class=\"text-right\">{{ item.total.toLocaleString('en-us') }}</td>\n        <td>\n          <button\n            v-if=\"item.is_paid\"\n            type=\"button\"\n            class=\"btn btn-sm btn-outline-success\"\n            title=\"更改為未付款\"\n            data-bs-toggle=\"tooltip\"\n            data-bs-placement=\"bottom\"\n            @click=\"changePaymentStatus(item.is_paid, item.id)\"\n          >\n            <span>已付款</span>\n          </button>\n          <button\n            v-if=\"!item.is_paid\"\n            type=\"button\"\n            class=\"btn btn-sm btn-outline-danger\"\n            title=\"更改為已付款\"\n            data-bs-toggle=\"tooltip\"\n            data-bs-placement=\"bottom\"\n            @click=\"changePaymentStatus(item.is_paid, item.id)\"\n          >\n            <span>未付款</span>\n          </button>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button class=\"btn btn-outline-danger btn-sm\" @click=\"openDeleteModal(item)\">\n              刪除\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <ThePagination :pages=\"pagination\" @emit-page=\"getProducts\" />\n  <DashboardModalDelete ref=\"deleteModal\" :item=\"tempOrder\" @deleteItem=\"deleteOrder\" />\n</template>\n\n<script>\nimport { apiGetOrderList, apiPutOrderItemDetail, apiDeleteOrder } from '@/api/admin';\nimport DashboardOrderList from '@/components/DashboardOrderList.vue';\nimport DashboardModalDelete from '@/components/DashboardModalDelete.vue';\nimport ThePagination from '@/components/ThePagination.vue';\n\nexport default {\n  components: {\n    ThePagination,\n    DashboardOrderList,\n    DashboardModalDelete,\n  },\n  inject: ['pushMessageState'],\n  data() {\n    return {\n      orders: [],\n      pagination: {},\n      isLoading: false,\n      tempOrder: {},\n    };\n  },\n  methods: {\n    async getProducts(page = 1) {\n      // Show loading overlay\n      this.isLoading = true;\n      await apiGetOrderList(page)\n        .then((res) => {\n          if (res.data.success) {\n            this.orders = res.data.orders;\n            this.pagination = res.data.pagination;\n            console.log(res);\n          }\n        })\n        .catch((err) => console.log(err));\n      // Hide loading overlay\n      this.isLoading = false;\n    },\n    async changePaymentStatus(status, id) {\n      this.isLoading = true;\n      const isPaid = !status;\n      await apiPutOrderItemDetail({ data: { is_paid: isPaid } }, id)\n        .then((res) => {\n          console.log(res);\n          this.pushMessageState(res, '訂單狀態更新');\n          this.getProducts();\n        })\n        .catch((err) => console.log(err));\n    },\n    async deleteOrder(item) {\n      const { id } = item;\n      this.isLoading = true;\n      await apiDeleteOrder(id)\n        .then((res) => {\n          console.log(res);\n          this.getProducts();\n          this.$refs.deleteModal.hideModal();\n          this.pushMessageState(res, '訂單刪除');\n        })\n        .catch((err) => console.log(err));\n    },\n    openDeleteModal(item) {\n      this.tempOrder = { ...item, title: '此筆訂單' };\n      this.$refs.deleteModal.showModal();\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n","<template>\n  <table class=\"table table-striped table-hover\">\n    <thead>\n      <tr>\n        <th scope=\"col\">品名</th>\n        <th scope=\"col\">數量</th>\n        <th scope=\"col\" class=\"text-end\">單價</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"item in order.products\" :key=\"item.id\">\n        <td scope=\"row\">{{ item.product.title }}</td>\n        <td>{{ item.qty }}/{{ item.product.unit }}</td>\n        <td class=\"text-end\">{{ item.product.price?.toLocaleString('en-us') }}</td>\n      </tr>\n    </tbody>\n  </table>\n  <table class=\"table table-striped table-hover\">\n    <thead>\n      <tr>\n        <th scope=\"col\">Email</th>\n        <th scope=\"col\">收件人名稱</th>\n        <th scope=\"col\">收件人連絡電話</th>\n        <th scope=\"col\">收件人地址</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td scope=\"row\">{{ form.email }}</td>\n        <td scope=\"row\">{{ form.name }}</td>\n        <td scope=\"row\">{{ form.tel }}</td>\n        <td scope=\"row\">{{ form.address }}</td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nexport default {\n  props: {\n    order: {\n      type: Object,\n      default: () => {},\n    },\n    form: {\n      type: Object,\n      default: () => {},\n    },\n  },\n};\n</script>\n","import { render } from \"./DashboardOrderList.vue?vue&type=template&id=470febdc\"\nimport script from \"./DashboardOrderList.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardOrderList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\rainb\\\\Desktop\\\\vue-project\\\\CHIRP-thermos\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DashboardOrders.vue?vue&type=template&id=568b10f9\"\nimport script from \"./DashboardOrders.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardOrders.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\rainb\\\\Desktop\\\\vue-project\\\\CHIRP-thermos\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_6","_hoisted_9","_createVNode","_component_LoadingOverlay","active","$data","_hoisted_2","_createElementBlock","_Fragment","_renderList","item","index","key","_toDisplayString","id","user","email","_component_DashboardOrderList","order","form","total","toLocaleString","is_paid","type","title","onClick","$options","_hoisted_12","_component_ThePagination","pages","onEmitPage","_component_DashboardModalDelete","ref","onDeleteItem","scope","$props","products","product","qty","unit","price","name","tel","address","props","Object","default","__exports__","components","ThePagination","DashboardOrderList","DashboardModalDelete","inject","data","orders","pagination","isLoading","tempOrder","methods","async","page","this","apiGetOrderList","then","res","success","catch","err","status","isPaid","apiPutOrderItemDetail","pushMessageState","getProducts","apiDeleteOrder","$refs","deleteModal","hideModal","openDeleteModal","showModal","created","render"],"sourceRoot":""}