"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[148],{4827:function(t,e,a){a.d(e,{er:function(){return w},Wf:function(){return I},dr:function(){return k},ye:function(){return q},gJ:function(){return f},FC:function(){return _},Vh:function(){return v},sG:function(){return y}});var s=a(6265),r=a.n(s);const d=r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),i=()=>d.get("/cart"),c=t=>d.post("/cart",t),n=(t,e)=>d.put(`/cart/${e}`,t),o=t=>d.delete(`/cart/${t}`),l=(r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"})),u=t=>l.post("/coupon",t),m=r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),p=t=>m.get(`/order/${t}`),h=t=>m.post("/order",t),g=r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),b=()=>g.get("/products"),I=i,f=c,y=n,w=o,_=u,k=p,v=h,q=b},4677:function(t,e,a){a.d(e,{x:function(){return c}});var s=a(4827),r=a(4301),d=a(6294);const i=(0,d.Z)(),c=(0,r.Q_)("cart",{state:()=>({cart:{},itemQty:0}),getters:{discount(){return this.cart.total-this.cart.final_total}},actions:{async getCartList(){i.isLoading=!0,await(0,s.Wf)().then((t=>{this.cart=t.data.data})).catch((t=>{})),i.isLoading=!1},async addCartItem(t,e){i.cartLoadingItem=t,i.cartItemIsAdded=!1,await(0,s.gJ)({data:{product_id:t,qty:e}}).then((t=>{i.cartLoadingItem="",i.cartItemIsAdded=!0})).catch((t=>{i.cartItemIsAdded=!1})),this.getCartList()},async updateCartItem({itemId:t,qty:e}){const a=e<=0?1:e;i.cartLoadingItem=t,await(0,s.sG)({data:{product_id:t,qty:a}},t).then((t=>{})).catch((t=>{})),this.getCartList(),i.cartLoadingItem=""},async deleteCartItem(t){i.cartDeletedItem=t,await(0,s.er)(t).then((t=>{})).catch((t=>{})),this.getCartList(),i.cartDeletedItem=""}}})},6294:function(t,e,a){var s=a(4301);e["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:!1,cartIsShown:!1,cartLoadingItem:"",cartDeletedItem:"",cartItemIsAdded:!1,couponIsApplied:!1,couponIsValid:!1,orderIsValid:!1})})},8686:function(t,e,a){a.d(e,{Z:function(){return h}});var s=a(3396);const r=["disabled"],d={for:"qty",class:"w-25 align-middle"},i=["disabled","value"],c=["disabled"];function n(t,e,a,n,o,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[a.hasOperators?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn bi bi-dash fs-3 text-black-50",disabled:t.cartDeletedItem===a.itemId||1===a.qty,onClick:e[0]||(e[0]=e=>t.$emit("updateItem",{qty:a.qty-1,itemId:a.itemId}))},null,8,r)):(0,s.kq)("",!0),(0,s._)("label",d,[(0,s._)("input",{type:"number",class:"rounded form-control text-center w-100 text-black-50 bg-transparent",id:"qty",min:"1",disabled:t.cartDeletedItem===a.itemId||!a.hasOperators,value:a.qty,onChange:e[1]||(e[1]=e=>t.$emit("update:value",Number(e.target.value)))},null,40,i)]),a.hasOperators?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn bi bi-plus fs-3 text-black-50",disabled:t.cartDeletedItem===a.itemId,onClick:e[2]||(e[2]=e=>t.$emit("updateItem",{qty:a.qty+1,itemId:a.itemId}))},null,8,c)):(0,s.kq)("",!0)],64)}var o=a(6294),l=a(4301),u={props:{hasOperators:{type:Boolean,default:!0},qty:{type:Number,default:1},itemId:{type:String,default:"defaultId"}},emits:["updateItem","update:value"],computed:{...(0,l.rn)(o.Z,["cartDeletedItem"])}},m=a(89);const p=(0,m.Z)(u,[["render",n],["__scopeId","data-v-893b448e"]]);var h=p},6148:function(t,e,a){a.r(e),a.d(e,{default:function(){return H}});var s=a(3396),r=a(7139);const d=t=>((0,s.dD)("data-v-545b115e"),t=t(),(0,s.Cn)(),t),i={class:"table align-middle table-borderless text-center border mb-3"},c={class:"table-light border-bottom"},n=d((()=>(0,s._)("th",{class:"fw-normal",scope:"col"},"商品資訊",-1))),o=d((()=>(0,s._)("th",{class:"d-none d-md-table-cell fw-normal",scope:"col"},"商品價格",-1))),l=d((()=>(0,s._)("th",{class:"d-none d-md-table-cell fw-normal",scope:"col",width:"180"},"數量",-1))),u={key:0,class:"d-none d-md-table-cell fw-normal",scope:"col"},m={class:"col-12 col-md-auto text-center text-md-start"},p={class:"figure figure--spacing-mobile d-flex justify-content-start align-items-center flex-column flex-md-row m-0"},h={class:"img-box d-flex justify-content-center align-items-center border ms-1 me-2"},g=["src"],b={class:"fs-6 m-0 pt-3 pt-md-0"},I={class:"col-12 col-md-auto p-2"},f={class:"col-12 col-md-auto p-0"},y={key:1,class:"spinner-border spinner-border-sm",role:"status"},w=d((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),_=[w],k={key:0,class:"col-12 col-md-auto p-0"},v=["onClick"],q={key:1,class:"spinner-border spinner-border-sm align-middle",role:"status"},x=d((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),D=[x],L={key:0,class:"border-top"},C={colspan:"4",class:"text-end fw-medium"},U=(0,s.Uk)(" 折扣"),S={class:"fw-medium ps-3"},$={colspan:"4",class:"text-end fw-bold"},O=(0,s.Uk)(" 本訂單須支付金額"),Z={class:"fw-bold ps-3"},j={key:1,colspan:"4",class:"p-4"},A=(0,s.Uk)(" 您的購物車目前沒有任何商品，"),N=(0,s.Uk)("去購物");function R(t,e,a,d,w,x){const R=(0,s.up)("StoreProductInput"),z=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("table",i,[(0,s._)("thead",c,[(0,s._)("tr",null,[n,o,l,a.isSummary?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("th",u,"變更明細"))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.cart.carts,((e,d)=>((0,s.wg)(),(0,s.iD)("tr",{key:e+d,class:(0,r.C_)([{"td-deleted":t.cartDeletedItem===e.id,"text-muted":t.cartDeletedItem===e.id},"d-flex d-sm-table-row table-row--divider-light flex-wrap justify-content-center m-2"])},[(0,s._)("td",m,[(0,s._)("figure",p,[(0,s._)("div",h,[(0,s._)("img",{src:e.product.imageUrl,alt:"購物車商品圖",class:"img-fluid img-cart-item p-1 rounded"},null,8,g)]),(0,s._)("figcaption",null,[(0,s._)("h2",b,(0,r.zw)(e.product.title),1)])])]),(0,s._)("td",I," NT$ "+(0,r.zw)(e.product.price.toLocaleString("en-us")),1),(0,s._)("td",f,[t.cartLoadingItem!==e.id?((0,s.wg)(),(0,s.j4)(R,{key:0,hasOperators:x.hasOperators,qty:e.qty,itemId:e.id,onUpdateItem:t.updateCartItem,"onUpdate:value":a=>t.updateCartItem({itemId:e.id,qty:a})},null,8,["hasOperators","qty","itemId","onUpdateItem","onUpdate:value"])):(0,s.kq)("",!0),t.cartLoadingItem===e.id?((0,s.wg)(),(0,s.iD)("div",y,_)):(0,s.kq)("",!0)]),a.isSummary?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("td",k,[t.cartDeletedItem!==e.id?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-deleted bi bi-trash",onClick:a=>t.deleteCartItem(e.id)},null,8,v)):(0,s.kq)("",!0),t.cartDeletedItem===e.id?((0,s.wg)(),(0,s.iD)("div",q,D)):(0,s.kq)("",!0)]))],2)))),128))]),a.isSummary?((0,s.wg)(),(0,s.iD)("tfoot",L,[(0,s._)("tr",null,[(0,s._)("td",C,[U,(0,s._)("span",S,"- NT$ "+(0,r.zw)(t.discount)+"元",1)])]),(0,s._)("tr",null,[(0,s._)("td",$,[O,(0,s._)("span",Z," NT$ "+(0,r.zw)(t.cart.final_total?.toLocaleString("en-us"))+"元",1)])])])):(0,s.kq)("",!0),0===this.cart.carts?.length?((0,s.wg)(),(0,s.iD)("td",j,[A,(0,s.Wm)(z,{to:"/thermos/classic/details/classic-green",class:"text-decoration-none link-classic-green fw-medium"},{default:(0,s.w5)((()=>[N])),_:1})])):(0,s.kq)("",!0)])])}var z=a(4301),Q=a(4677),T=a(6294),V=a(8686),W={components:{StoreProductInput:V.Z},props:{isSummary:{type:Boolean,default:!1}},data(){return{tempItem:[]}},computed:{hasOperators(){return!this.isSummary},...(0,z.rn)(Q.x,["cart","discount"]),...(0,z.rn)(T.Z,["cartLoadingItem","cartDeletedItem"])},methods:{...(0,z.nv)(Q.x,["getCartList","updateCartItem","deleteCartItem"])},created(){this.getCartList()}},B=a(89);const G=(0,B.Z)(W,[["render",R],["__scopeId","data-v-545b115e"]]);var H=G}}]);
//# sourceMappingURL=148.21742a61.js.map