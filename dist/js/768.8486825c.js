"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[768],{2768:function(t,e,a){a.r(e),a.d(e,{default:function(){return q}});var l=a(3396),o=a(7139);const s={class:"table mt-4"},n=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"訂單編號"),(0,l._)("th",null,"Email"),(0,l._)("th",null,"購買款項"),(0,l._)("th",null,"應付金額"),(0,l._)("th",null,"是否付款"),(0,l._)("th",null,"編輯")])],-1),i={class:"text-right"},d={class:"text-right"},r=["onClick"],c=(0,l._)("span",null,"已付款",-1),u=[c],p=["onClick"],h=(0,l._)("span",null,"未付款",-1),_=[h],g={class:"btn-group"},b=["onClick"];function m(t,e,a,c,h,m){const w=(0,l.up)("LoadingOverlay"),y=(0,l.up)("DashboardOrderList"),f=(0,l.up)("ThePagination"),D=(0,l.up)("DashboardModalDelete");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(w,{active:h.isLoading},null,8,["active"]),(0,l._)("table",s,[n,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h.orders,((t,e)=>((0,l.wg)(),(0,l.iD)("tr",{key:t+e},[(0,l._)("td",null,(0,o.zw)(t.id),1),(0,l._)("td",null,(0,o.zw)(t.user.email),1),(0,l._)("td",i,[(0,l.Wm)(y,{order:t,form:t.user},null,8,["order","form"])]),(0,l._)("td",d,(0,o.zw)(t.total.toLocaleString("en-us")),1),(0,l._)("td",null,[t.is_paid?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-sm btn-outline-success",title:"更改為未付款","data-bs-toggle":"tooltip","data-bs-placement":"bottom",onClick:e=>m.changePaymentStatus(t.is_paid,t.id)},u,8,r)):(0,l.kq)("",!0),t.is_paid?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:1,type:"button",class:"btn btn-sm btn-outline-danger",title:"更改為已付款","data-bs-toggle":"tooltip","data-bs-placement":"bottom",onClick:e=>m.changePaymentStatus(t.is_paid,t.id)},_,8,p))]),(0,l._)("td",null,[(0,l._)("div",g,[(0,l._)("button",{class:"btn btn-outline-danger btn-sm",onClick:e=>m.openDeleteModal(t)}," 刪除 ",8,b)])])])))),128))])]),(0,l.Wm)(f,{pages:h.pagination,onEmitPage:m.getProducts},null,8,["pages","onEmitPage"]),(0,l.Wm)(D,{ref:"deleteModal",item:h.tempOrder,onDeleteItem:m.deleteOrder},null,8,["item","onDeleteItem"])],64)}var w=a(506);const y={class:"table table-striped table-hover"},f=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{scope:"col"},"品名"),(0,l._)("th",{scope:"col"},"數量"),(0,l._)("th",{scope:"col",class:"text-end"},"單價")])],-1),D={scope:"row"},k={class:"text-end"},P={class:"table table-striped table-hover"},v=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{scope:"col"},"Email"),(0,l._)("th",{scope:"col"},"收件人名稱"),(0,l._)("th",{scope:"col"},"收件人連絡電話"),(0,l._)("th",{scope:"col"},"收件人地址")])],-1),L={scope:"row"},M={scope:"row"},z={scope:"row"},O={scope:"row"};function C(t,e,a,s,n,i){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("table",y,[f,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.order.products,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",D,(0,o.zw)(t.product.title),1),(0,l._)("td",null,(0,o.zw)(t.qty)+"/"+(0,o.zw)(t.product.unit),1),(0,l._)("td",k,(0,o.zw)(t.product.price?.toLocaleString("en-us")),1)])))),128))])]),(0,l._)("table",P,[v,(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",L,(0,o.zw)(a.form.email),1),(0,l._)("td",M,(0,o.zw)(a.form.name),1),(0,l._)("td",z,(0,o.zw)(a.form.tel),1),(0,l._)("td",O,(0,o.zw)(a.form.address),1)])])])],64)}var S={props:{order:{type:Object,default:()=>{}},form:{type:Object,default:()=>{}}}},j=a(89);const W=(0,j.Z)(S,[["render",C]]);var x=W,E=a(8198),H=a(3267),Y={components:{ThePagination:H.Z,DashboardOrderList:x,DashboardModalDelete:E.Z},inject:["pushMessageState"],data(){return{orders:[],pagination:{},isLoading:!1,tempOrder:{}}},methods:{async getProducts(t=1){this.isLoading=!0,await(0,w.vT)(t).then((t=>{t.data.success&&(this.orders=t.data.orders,this.pagination=t.data.pagination)})).catch((t=>{})),this.isLoading=!1},async changePaymentStatus(t,e){this.isLoading=!0;const a=!t;await(0,w.P5)({data:{is_paid:a}},e).then((t=>{this.pushMessageState(t,"訂單狀態更新"),this.getProducts()})).catch((t=>{}))},async deleteOrder(t){const{id:e}=t;this.isLoading=!0,await(0,w.LW)(e).then((t=>{this.getProducts(),this.$refs.deleteModal.hideModal(),this.pushMessageState(t,"訂單刪除")})).catch((t=>{}))},openDeleteModal(t){this.tempOrder={...t,title:"此筆訂單"},this.$refs.deleteModal.showModal()}},created(){this.getProducts()}};const Z=(0,j.Z)(Y,[["render",m]]);var q=Z}}]);
//# sourceMappingURL=768.8486825c.js.map