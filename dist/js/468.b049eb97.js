"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[468],{4827:function(t,e,a){a.d(e,{er:function(){return w},Wf:function(){return b},dr:function(){return _},ye:function(){return q},gJ:function(){return f},FC:function(){return k},Vh:function(){return v},sG:function(){return y}});var s=a(6265),r=a.n(s);const c=r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),d=()=>c.get("/cart"),i=t=>c.post("/cart",t),n=(t,e)=>c.put(`/cart/${e}`,t),o=t=>c.delete(`/cart/${t}`),l=(r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"})),u=t=>l.post("/coupon",t),m=r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),p=t=>m.get(`/order/${t}`),g=t=>m.post("/order",t),h=r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),I=()=>h.get("/products"),b=d,f=i,y=n,w=o,k=u,_=p,v=g,q=I},4677:function(t,e,a){a.d(e,{x:function(){return i}});var s=a(4827),r=a(4301),c=a(6294);const d=(0,c.Z)(),i=(0,r.Q_)("cart",{state:()=>({cart:{},itemQty:0}),getters:{discount(){return this.cart.total-this.cart.final_total}},actions:{async getCartList(){d.isLoading=!0,await(0,s.Wf)().then((t=>{this.cart=t.data.data})).catch((t=>{})),d.isLoading=!1},async addCartItem(t,e){d.cartLoadingItem=t,d.cartItemIsAdded=!1,await(0,s.gJ)({data:{product_id:t,qty:e}}).then((t=>{d.cartLoadingItem="",d.cartItemIsAdded=!0})).catch((t=>{d.cartItemIsAdded=!1})),this.getCartList()},async updateCartItem({itemId:t,qty:e}){const a=e<=0?1:e;d.cartLoadingItem=t,await(0,s.sG)({data:{product_id:t,qty:a}},t).then((t=>{})).catch((t=>{})),this.getCartList(),d.cartLoadingItem=""},async deleteCartItem(t){d.cartDeletedItem=t,await(0,s.er)(t).then((t=>{})).catch((t=>{})),this.getCartList(),d.cartDeletedItem=""}}})},6294:function(t,e,a){var s=a(4301);e["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:!1,cartIsShown:!1,cartLoadingItem:"",cartDeletedItem:"",cartItemIsAdded:!1,couponIsApplied:!1,couponIsValid:!1,orderIsValid:!1})})},8686:function(t,e,a){a.d(e,{Z:function(){return g}});var s=a(3396);const r=["disabled"],c={for:"qty",class:"w-25 align-middle"},d=["disabled","value"],i=["disabled"];function n(t,e,a,n,o,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[a.hasOperators?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn bi bi-dash fs-3 text-black-50",disabled:t.cartDeletedItem===a.itemId||1===a.qty,onClick:e[0]||(e[0]=e=>t.$emit("updateItem",{qty:a.qty-1,itemId:a.itemId}))},null,8,r)):(0,s.kq)("",!0),(0,s._)("label",c,[(0,s._)("input",{type:"number",class:"rounded form-control text-center w-100 text-black-50 bg-transparent",id:"qty",min:"1",disabled:t.cartDeletedItem===a.itemId||!a.hasOperators,value:a.qty,onChange:e[1]||(e[1]=e=>t.$emit("update:value",Number(e.target.value)))},null,40,d)]),a.hasOperators?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn bi bi-plus fs-3 text-black-50",disabled:t.cartDeletedItem===a.itemId,onClick:e[2]||(e[2]=e=>t.$emit("updateItem",{qty:a.qty+1,itemId:a.itemId}))},null,8,i)):(0,s.kq)("",!0)],64)}var o=a(6294),l=a(4301),u={props:{hasOperators:{type:Boolean,default:!0},qty:{type:Number,default:1},itemId:{type:String,default:"defaultId"}},emits:["updateItem","update:value"],computed:{...(0,l.rn)(o.Z,["cartDeletedItem"])}},m=a(89);const p=(0,m.Z)(u,[["render",n],["__scopeId","data-v-893b448e"]]);var g=p},3468:function(t,e,a){a.r(e),a.d(e,{default:function(){return P}});var s=a(3396),r=a(7139);const c=t=>((0,s.dD)("data-v-755e897e"),t=t(),(0,s.Cn)(),t),d={class:"table align-middle table-borderless text-center border mb-3"},i={class:"table-light border-bottom"},n=c((()=>(0,s._)("th",{class:"fw-normal",scope:"col"},"商品資訊",-1))),o=c((()=>(0,s._)("th",{class:"d-none d-md-table-cell fw-normal",scope:"col"},"商品價格",-1))),l=c((()=>(0,s._)("th",{class:"d-none d-md-table-cell fw-normal",scope:"col",width:"180"},"數量",-1))),u={key:0,class:"d-none d-md-table-cell fw-normal",scope:"col"},m={key:1,class:"d-none d-md-table-cell fw-normal",scope:"col"},p={class:"col-12 col-md-auto text-center text-md-start"},g={class:"figure figure--spacing-mobile d-flex justify-content-start align-items-center flex-column flex-md-row m-0"},h={class:"img-box d-flex justify-content-center align-items-center border ms-1 me-2"},I=["src"],b={class:"fs-6 m-0"},f={class:"col-12 col-md-auto p-2"},y={class:"col-12 col-md-auto p-0"},w={key:1,class:"spinner-border spinner-border-sm",role:"status"},k=c((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),_=[k],v={key:0,class:"col-12 col-md-auto p-0"},q=["onClick"],D={key:1,class:"spinner-border spinner-border-sm align-middle",role:"status"},L=c((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),x=[L],C={key:1,class:"col-12 col-md-auto"},S={key:0,class:"border-top"},U={colspan:"4",class:"text-end fw-medium"},$=(0,s.Uk)(" 折扣"),O={class:"fw-medium ps-3"},Z={colspan:"4",class:"text-end fw-bold"},j=(0,s.Uk)(" 本訂單須支付金額"),N={class:"fw-bold ps-3"},z={key:1,colspan:"4",class:"p-4"},A=(0,s.Uk)(" 您的購物車目前沒有任何商品，"),R=(0,s.Uk)("去購物");function T(t,e,a,c,k,L){const T=(0,s.up)("StoreProductInput"),Q=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("table",d,[(0,s._)("thead",i,[(0,s._)("tr",null,[n,o,l,a.isSummary?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("th",u,"變更明細")),a.isSummary?((0,s.wg)(),(0,s.iD)("th",m,"小計")):(0,s.kq)("",!0)])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.cart.carts,((e,c)=>((0,s.wg)(),(0,s.iD)("tr",{key:e+c,class:(0,r.C_)([{"td-deleted":t.cartDeletedItem===e.id,"text-muted":t.cartDeletedItem===e.id},"d-flex d-sm-table-row table-row--divider-light flex-wrap justify-content-center m-2"])},[(0,s._)("td",p,[(0,s._)("figure",g,[(0,s._)("div",h,[(0,s._)("img",{src:e.product.imageUrl,alt:"購物車商品圖",class:"img-fluid img-cart-item p-1 rounded"},null,8,I)]),(0,s._)("figcaption",null,[(0,s._)("h2",b,(0,r.zw)(e.product.title),1)])])]),(0,s._)("td",f," NT$ "+(0,r.zw)(e.product.price.toLocaleString("en-us")),1),(0,s._)("td",y,[t.cartLoadingItem!==e.id?((0,s.wg)(),(0,s.j4)(T,{key:0,hasOperators:L.hasOperators,qty:e.qty,itemId:e.id,onUpdateItem:t.updateCartItem,"onUpdate:value":a=>t.updateCartItem({itemId:e.id,qty:a})},null,8,["hasOperators","qty","itemId","onUpdateItem","onUpdate:value"])):(0,s.kq)("",!0),t.cartLoadingItem===e.id?((0,s.wg)(),(0,s.iD)("div",w,_)):(0,s.kq)("",!0)]),a.isSummary?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("td",v,[t.cartDeletedItem!==e.id?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-deleted bi bi-trash",onClick:a=>t.deleteCartItem(e.id)},null,8,q)):(0,s.kq)("",!0),t.cartDeletedItem===e.id?((0,s.wg)(),(0,s.iD)("div",D,x)):(0,s.kq)("",!0)])),a.isSummary?((0,s.wg)(),(0,s.iD)("td",C," NT$ "+(0,r.zw)(e.total.toLocaleString("en-us")),1)):(0,s.kq)("",!0)],2)))),128))]),a.isSummary?((0,s.wg)(),(0,s.iD)("tfoot",S,[(0,s._)("tr",null,[(0,s._)("td",U,[$,(0,s._)("span",O,"- NT$ "+(0,r.zw)(t.discount)+"元",1)])]),(0,s._)("tr",null,[(0,s._)("td",Z,[j,(0,s._)("span",N," NT$ "+(0,r.zw)(t.cart.final_total?.toLocaleString("en-us"))+"元",1)])])])):(0,s.kq)("",!0),0===this.cart.carts?.length?((0,s.wg)(),(0,s.iD)("td",z,[A,(0,s.Wm)(Q,{to:"/thermos/classic/details/classic-green",class:"text-decoration-none link-classic-green fw-medium"},{default:(0,s.w5)((()=>[R])),_:1})])):(0,s.kq)("",!0)])])}var Q=a(4301),V=a(4677),W=a(6294),B=a(8686),G={components:{StoreProductInput:B.Z},props:{isSummary:{type:Boolean,default:!1}},data(){return{tempItem:[]}},computed:{hasOperators(){return!this.isSummary},...(0,Q.rn)(V.x,["cart","discount"]),...(0,Q.rn)(W.Z,["cartLoadingItem","cartDeletedItem"])},methods:{...(0,Q.nv)(V.x,["getCartList","updateCartItem","deleteCartItem"])},created(){this.getCartList()}},H=a(89);const J=(0,H.Z)(G,[["render",T],["__scopeId","data-v-755e897e"]]);var P=J}}]);
//# sourceMappingURL=468.b049eb97.js.map