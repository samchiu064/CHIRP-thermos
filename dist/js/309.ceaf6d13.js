"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[309],{4827:function(t,e,a){a.d(e,{er:function(){return v},Wf:function(){return y},dr:function(){return _},ye:function(){return x},gJ:function(){return h},FC:function(){return w},Vh:function(){return k},sG:function(){return f}});var s=a(6265),r=a.n(s);const l=r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),i=()=>l.get("/cart"),c=t=>l.post("/cart",t),d=(t,e)=>l.put(`/cart/${e}`,t),n=t=>l.delete(`/cart/${t}`),o=(r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"})),u=t=>o.post("/coupon",t),m=r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),p=t=>m.get(`/order/${t}`),b=t=>m.post("/order",t),I=r().create({baseURL:"https://vue3-course-api.hexschool.io/api/samchiu064-api/"}),g=()=>I.get("/products"),y=i,h=c,f=d,v=n,w=u,_=p,k=b,x=g},4677:function(t,e,a){a.d(e,{x:function(){return c}});var s=a(4827),r=a(4301),l=a(6294);const i=(0,l.Z)(),c=(0,r.Q_)("cart",{state:()=>({cart:{},itemQty:0}),getters:{discount(){return this.cart.total-this.cart.final_total}},actions:{async getCartList(){i.isLoading=!0;const t=await(0,s.Wf)();t.data.success&&(this.cart=t.data.data),i.isLoading=!1},async addCartItem(t,e){i.cartLoadingItem=t,i.cartItemIsAdded=!1;const a=await(0,s.gJ)({data:{product_id:t,qty:e}});a.data.success?(i.cartLoadingItem="",i.cartItemIsAdded=!0):i.cartItemIsAdded=!1,this.getCartList()},async updateCartItem({itemId:t,qty:e}){const a=e<=0?1:e;i.cartLoadingItem=t;const r=await(0,s.sG)({data:{product_id:t,qty:a}},t);r.data.success&&(i.cartLoadingItem="",this.getCartList())},async deleteCartItem(t){i.cartDeletedItem=t;const e=await(0,s.er)(t);e.data.success&&(this.cancelOverlay(),this.getCartList())},overlayCartItem(t){i.cartItemIsOverlaid=!0,i.cartDeletedItem=t},cancelOverlay(){i.cartItemIsOverlaid=!1,i.cartDeletedItem=""}}})},6294:function(t,e,a){var s=a(4301);e["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:!1,cartIsShown:!1,cartLoadingItem:"",cartDeletedItem:"",cartItemIsAdded:!1,cartItemIsOverlaid:!1,couponIsApplied:!1,couponIsValid:!1,orderIsValid:!1})})},1680:function(t,e,a){a.d(e,{Z:function(){return b}});var s=a(3396);const r=["disabled"],l={for:"qty",class:"w-25 align-middle"},i=["disabled","value"],c=["disabled"];function d(t,e,a,d,n,o){return(0,s.wg)(),(0,s.iD)(s.HY,null,[a.hasOperators?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn bi bi-dash fs-3 text-black-50",disabled:t.cartDeletedItem===a.itemId||1===a.qty,onClick:e[0]||(e[0]=e=>t.$emit("updateItem",{qty:a.qty-1,itemId:a.itemId}))},null,8,r)):(0,s.kq)("",!0),(0,s._)("label",l,[(0,s._)("input",{type:"number",class:"rounded form-control text-center w-100 text-black-50 bg-transparent px-2",id:"qty",min:"1",disabled:t.cartDeletedItem===a.itemId||!a.hasOperators&&!a.editable,value:a.qty,onChange:e[1]||(e[1]=e=>t.$emit("update:value",Number(e.target.value)))},null,40,i)]),a.hasOperators?((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"btn bi bi-plus fs-3 text-black-50",disabled:t.cartDeletedItem===a.itemId,onClick:e[2]||(e[2]=e=>t.$emit("updateItem",{qty:a.qty+1,itemId:a.itemId}))},null,8,c)):(0,s.kq)("",!0)],64)}var n=a(6294),o=a(4301),u={props:{hasOperators:{type:Boolean,default:!0},qty:{type:Number,default:1},itemId:{type:String,default:"defaultId"},editable:{type:Boolean,default:!0}},emits:["updateItem","update:value"],computed:{...(0,o.rn)(n.Z,["cartDeletedItem"])}},m=a(89);const p=(0,m.Z)(u,[["render",d],["__scopeId","data-v-14698621"]]);var b=p},5309:function(t,e,a){a.r(e),a.d(e,{default:function(){return K}});var s=a(3396),r=a(7139);const l=t=>((0,s.dD)("data-v-053e1604"),t=t(),(0,s.Cn)(),t),i={class:"table align-middle table-borderless text-center border mb-3"},c={class:"table-light border-bottom"},d=l((()=>(0,s._)("th",{class:"fw-normal",scope:"col"},"商品資訊",-1))),n=l((()=>(0,s._)("th",{class:"d-none d-md-table-cell fw-normal",scope:"col"},"商品價格",-1))),o=l((()=>(0,s._)("th",{class:"d-none d-md-table-cell fw-normal",scope:"col",width:"180"},"數量",-1))),u={key:0,class:"d-none d-md-table-cell fw-normal",scope:"col"},m={class:"col-12 col-md-auto text-center text-md-start"},p={class:"figure figure--spacing-mobile d-flex justify-content-start align-items-center flex-column flex-md-row m-0"},b={class:"img-box d-flex justify-content-center align-items-center border ms-1 me-2"},I=["src","alt"],g={class:"fs-6 m-0 pt-3 pt-md-0"},y={class:"col-12 col-md-auto p-2"},h={class:"col-12 col-md-auto p-0"},f={key:1,class:"spinner-border spinner-border-sm",role:"status"},v=l((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),w=[v],_={key:0,class:"col-12 col-md-auto p-0"},k=["onClick"],x={key:1,class:"spinner-border spinner-border-sm align-middle",role:"status"},C=l((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),D=[C],q={key:1,class:"overlay w-100 h-100 position-absolute top-0 start-0"},L={class:"w-100 position-absolute top-50 start-50 translate-middle"},O=l((()=>(0,s._)("p",{class:"text-center text-light"},"確定要刪除嗎？",-1))),U={class:"d-flex justify-content-center",role:"group","aria-label":"Basic example"},S=["onClick"],$={key:0,class:"border-top"},Z={colspan:"4",class:"text-end fw-medium"},j=(0,s.Uk)(" 折扣"),A={class:"fw-medium ps-3"},N={colspan:"4",class:"text-end fw-bold"},R=(0,s.Uk)(" 本訂單須支付金額"),z={class:"fw-bold ps-3"},B={key:1,colspan:"4",class:"p-4"},Q=(0,s.Uk)(" 您的購物車目前沒有任何商品，"),T=(0,s.Uk)("去購物");function V(t,e,a,l,v,C){const V=(0,s.up)("StoreProductInput"),W=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("table",i,[(0,s._)("thead",c,[(0,s._)("tr",null,[d,n,o,a.isSummary?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("th",u,"變更明細"))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.cart.carts,((l,i)=>((0,s.wg)(),(0,s.iD)("tr",{key:l+i,class:(0,r.C_)([{"td-deleted":t.cartDeletedItem===l.id,"text-muted":t.cartDeletedItem===l.id},"d-flex d-sm-table-row table-row--divider-light flex-wrap justify-content-center m-2 position-relative"])},[(0,s._)("td",m,[(0,s._)("figure",p,[(0,s._)("div",b,[(0,s._)("img",{src:l.product.imageUrl,alt:`${l.product.title}圖片`,class:"img-fluid img-cart-item p-1 rounded"},null,8,I)]),(0,s._)("figcaption",null,[(0,s._)("h2",g,(0,r.zw)(l.product.title),1)])])]),(0,s._)("td",y," NT$ "+(0,r.zw)(l.product.price.toLocaleString("en-us")),1),(0,s._)("td",h,[t.cartLoadingItem!==l.id?((0,s.wg)(),(0,s.j4)(V,{key:0,hasOperators:C.hasOperators,editable:C.editable,qty:l.qty,itemId:l.id,onUpdateItem:t.updateCartItem,"onUpdate:value":e=>t.updateCartItem({itemId:l.id,qty:e})},null,8,["hasOperators","editable","qty","itemId","onUpdateItem","onUpdate:value"])):(0,s.kq)("",!0),t.cartLoadingItem===l.id?((0,s.wg)(),(0,s.iD)("div",f,w)):(0,s.kq)("",!0)]),a.isSummary?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("td",_,[t.cartDeletedItem!==l.id?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-deleted bi bi-trash",onClick:e=>t.overlayCartItem(l.id)},null,8,k)):(0,s.kq)("",!0),t.cartDeletedItem===l.id?((0,s.wg)(),(0,s.iD)("div",x,D)):(0,s.kq)("",!0)])),l.id===t.cartDeletedItem?((0,s.wg)(),(0,s.iD)("td",q,[(0,s._)("div",L,[O,(0,s._)("div",U,[(0,s._)("button",{type:"button",class:"btn btn-danger me-1",onClick:e=>t.deleteCartItem(l.id)}," 刪除產品 ",8,S),(0,s._)("button",{type:"button",class:"btn btn-light ms-1",onClick:e[0]||(e[0]=(...e)=>t.cancelOverlay&&t.cancelOverlay(...e))}," 返回 ")])])])):(0,s.kq)("",!0)],2)))),128))]),a.isSummary?((0,s.wg)(),(0,s.iD)("tfoot",$,[(0,s._)("tr",null,[(0,s._)("td",Z,[j,(0,s._)("span",A,"- NT$ "+(0,r.zw)(t.discount)+"元",1)])]),(0,s._)("tr",null,[(0,s._)("td",N,[R,(0,s._)("span",z," NT$ "+(0,r.zw)(t.cart.final_total?.toLocaleString("en-us"))+"元",1)])])])):(0,s.kq)("",!0),0===this.cart.carts?.length?((0,s.wg)(),(0,s.iD)("td",B,[Q,(0,s.Wm)(W,{to:"/thermos/classic/details/classic-green",class:"text-decoration-none link-classic-green fw-medium"},{default:(0,s.w5)((()=>[T])),_:1})])):(0,s.kq)("",!0)])])}var W=a(4301),G=a(4677),H=a(6294),J=a(1680),P={components:{StoreProductInput:J.Z},props:{isSummary:{type:Boolean,default:!1}},data(){return{tempItem:[]}},computed:{hasOperators(){return!this.isSummary},editable(){return!this.isSummary},...(0,W.rn)(G.x,["cart","discount"]),...(0,W.rn)(H.Z,["cartLoadingItem","cartDeletedItem"])},methods:{...(0,W.nv)(G.x,["getCartList","updateCartItem","deleteCartItem","overlayCartItem","cancelOverlay"])},created(){this.getCartList()}},Y=a(89);const F=(0,Y.Z)(P,[["render",V],["__scopeId","data-v-053e1604"]]);var K=F}}]);
//# sourceMappingURL=309.ceaf6d13.js.map