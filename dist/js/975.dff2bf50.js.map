{"version":3,"file":"js/975.dff2bf50.js","mappings":"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","sources":["webpack://my-project/./src/views/DashboardOrders.vue","webpack://my-project/./src/components/DashboardOrderList.vue","webpack://my-project/./src/components/DashboardOrderList.vue?1232","webpack://my-project/./src/views/DashboardOrders.vue?7a71"],"sourcesContent":["<template>\n  <LoadingOverlay :active=\"isLoading\" />\n  <table class=\"table mt-4\">\n    <thead>\n      <tr>\n        <th>訂單編號</th>\n        <th>Email</th>\n        <th>購買款項</th>\n        <th>應付金額</th>\n        <th>是否付款</th>\n        <th>編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(item, index) in orders\" :key=\"item + index\">\n        <td>{{ item.id }}</td>\n        <td>{{ item.user.email }}</td>\n        <td class=\"text-right\">\n          <DashboardOrderList :order=\"item\" :form=\"item.user\" />\n        </td>\n        <td class=\"text-right\">{{ item.total.toLocaleString('en-us') }}</td>\n        <td>\n          <button\n            v-if=\"item.is_paid\"\n            type=\"button\"\n            class=\"btn btn-sm btn-outline-success\"\n            title=\"更改為未付款\"\n            data-bs-toggle=\"tooltip\"\n            data-bs-placement=\"bottom\"\n            @click=\"changePaymentStatus(item.is_paid, item.id)\"\n          >\n            <span>已付款</span>\n          </button>\n          <button\n            v-if=\"!item.is_paid\"\n            type=\"button\"\n            class=\"btn btn-sm btn-outline-danger\"\n            title=\"更改為已付款\"\n            data-bs-toggle=\"tooltip\"\n            data-bs-placement=\"bottom\"\n            @click=\"changePaymentStatus(item.is_paid, item.id)\"\n          >\n            <span>未付款</span>\n          </button>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-danger btn-sm\"\n              @click=\"openDeleteModal(item)\"\n            >\n              刪除\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <ThePagination :pages=\"pagination\" @emit-page=\"getProducts\" />\n  <DashboardModalDelete ref=\"deleteModal\" :item=\"tempOrder\" @deleteItem=\"deleteOrder\" />\n</template>\n\n<script>\nimport { apiGetOrderList, apiPutOrderItemDetail, apiDeleteOrder } from '@/api/admin';\nimport DashboardOrderList from '@/components/DashboardOrderList.vue';\nimport DashboardModalDelete from '@/components/DashboardModalDelete.vue';\nimport ThePagination from '@/components/ThePagination.vue';\n\nexport default {\n  components: {\n    ThePagination,\n    DashboardOrderList,\n    DashboardModalDelete,\n  },\n  inject: ['pushMessageState'],\n  data() {\n    return {\n      orders: [],\n      pagination: {},\n      isLoading: false,\n      tempOrder: {},\n    };\n  },\n  methods: {\n    async getProducts(page = 1) {\n      this.isLoading = true;\n\n      try {\n        const result = await apiGetOrderList(page);\n\n        this.orders = result.data.orders;\n        this.pagination = result.data.pagination;\n\n        this.pushMessageState(result, '產品資料獲取');\n      } catch (err) {\n        this.pushMessageState(err, '產品資料獲取');\n      }\n\n      this.isLoading = false;\n    },\n    async changePaymentStatus(status, id) {\n      this.isLoading = true;\n\n      const isPaid = !status;\n\n      try {\n        const result = await apiPutOrderItemDetail({ data: { is_paid: isPaid } }, id);\n\n        this.pushMessageState(result, '訂單狀態更新');\n        this.getProducts();\n      } catch (err) {\n        this.pushMessageState(err, '優惠券資料刪除');\n      }\n\n      this.isLoading = false;\n    },\n    async deleteOrder(item) {\n      this.isLoading = true;\n\n      try {\n        const { id } = item;\n        const result = await apiDeleteOrder(id);\n\n        this.pushMessageState(result, '訂單刪除');\n        this.getProducts();\n        this.$refs.deleteModal.hideModal();\n      } catch (err) {\n        this.pushMessageState(err, '訂單刪除');\n      }\n\n      this.isLoading = false;\n    },\n    openDeleteModal(item) {\n      this.tempOrder = { ...item, title: '此筆訂單' };\n      this.$refs.deleteModal.showModal();\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n","<template>\n  <table class=\"table table-striped table-hover\">\n    <thead>\n      <tr>\n        <th scope=\"col\">品名</th>\n        <th scope=\"col\">數量</th>\n        <th scope=\"col\" class=\"text-end\">單價</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"item in order.products\" :key=\"item.id\">\n        <td scope=\"row\">{{ item.product.title }}</td>\n        <td>{{ item.qty }}/{{ item.product.unit }}</td>\n        <td class=\"text-end\">{{ item.product.price?.toLocaleString('en-us') }}</td>\n      </tr>\n    </tbody>\n  </table>\n  <table class=\"table table-striped table-hover\">\n    <thead>\n      <tr>\n        <th scope=\"col\">Email</th>\n        <th scope=\"col\">收件人名稱</th>\n        <th scope=\"col\">收件人連絡電話</th>\n        <th scope=\"col\">收件人地址</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td scope=\"row\">{{ form.email }}</td>\n        <td scope=\"row\">{{ form.name }}</td>\n        <td scope=\"row\">{{ form.tel }}</td>\n        <td scope=\"row\">{{ form.address }}</td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nexport default {\n  props: {\n    order: {\n      type: Object,\n      default: () => {},\n    },\n    form: {\n      type: Object,\n      default: () => {},\n    },\n  },\n};\n</script>\n","import { render } from \"./DashboardOrderList.vue?vue&type=template&id=470febdc\"\nimport script from \"./DashboardOrderList.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardOrderList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\rainb\\\\Desktop\\\\vue-project\\\\CHIRP-thermos\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DashboardOrders.vue?vue&type=template&id=30220ea6\"\nimport script from \"./DashboardOrders.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardOrders.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\rainb\\\\Desktop\\\\vue-project\\\\CHIRP-thermos\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_6","_hoisted_9","_createVNode","_component_LoadingOverlay","active","$data","_hoisted_2","_createElementBlock","_Fragment","_renderList","item","index","key","_toDisplayString","id","user","email","_component_DashboardOrderList","order","form","total","toLocaleString","is_paid","type","title","onClick","$options","_hoisted_12","_component_ThePagination","pages","onEmitPage","_component_DashboardModalDelete","ref","onDeleteItem","scope","$props","products","product","qty","unit","price","name","tel","address","props","Object","default","__exports__","components","ThePagination","DashboardOrderList","DashboardModalDelete","inject","data","orders","pagination","isLoading","tempOrder","methods","async","page","this","result","apiGetOrderList","pushMessageState","err","status","isPaid","apiPutOrderItemDetail","getProducts","apiDeleteOrder","$refs","deleteModal","hideModal","openDeleteModal","showModal","created","render"],"sourceRoot":""}