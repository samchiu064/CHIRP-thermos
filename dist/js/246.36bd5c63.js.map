{"version":3,"file":"js/246.36bd5c63.js","mappings":"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","sources":["webpack://my-project/./src/views/DashboardProducts.vue","webpack://my-project/./src/components/DashboardModalProduct.vue","webpack://my-project/./src/components/DashboardModalProduct.vue?044b","webpack://my-project/./src/views/DashboardProducts.vue?ef6e"],"sourcesContent":["<template>\n  <LoadingOverlay :active=\"isLoading\" />\n  <div class=\"text-end mt-3\">\n    <button class=\"btn btn-primary\" type=\"button\" @click=\"openModal(true)\">新增產品</button>\n  </div>\n  <table class=\"table mt-4\">\n    <thead>\n      <tr>\n        <th width=\"120\">分類</th>\n        <th>產品名稱</th>\n        <th width=\"120\">原價</th>\n        <th width=\"120\">售價</th>\n        <th width=\"100\">是否啟用</th>\n        <th width=\"200\">編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"item in products\" :key=\"item.id\">\n        <td>{{ item.category }}</td>\n        <td>{{ item.title }}</td>\n        <td class=\"text-right\">{{ item.origin_price.toLocaleString('en-us') }}</td>\n        <td class=\"text-right\">{{ item.price.toLocaleString('en-us') }}</td>\n        <td>\n          <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\n          <span class=\"text-muted\" v-else>未啟用</span>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button class=\"btn btn-outline-primary btn-sm\" @click=\"openModal(false, item)\">\n              編輯\n            </button>\n            <button class=\"btn btn-outline-danger btn-sm\" @click=\"openDeleteModal(item)\">\n              刪除\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <ThePagination :pages=\"pagination\" @emit-page=\"getProducts\" />\n  <DashboardModalProduct\n    ref=\"productModal\"\n    :product=\"tempProduct\"\n    @update-product=\"updateProduct\"\n  />\n  <DashboardModalDelete ref=\"deleteModal\" :item=\"tempProduct\" @deleteItem=\"deleteProduct\" />\n</template>\n\n<script>\nimport {\n  apiGetProductListByPage,\n  apiPostProductItem,\n  apiPutProductItemDetail,\n  apiDeleteProduct,\n} from '@/api/admin';\nimport DashboardModalProduct from '@/components/DashboardModalProduct.vue';\nimport DashboardModalDelete from '@/components/DashboardModalDelete.vue';\nimport ThePagination from '@/components/ThePagination.vue';\n\nexport default {\n  components: {\n    DashboardModalProduct,\n    DashboardModalDelete,\n    ThePagination,\n  },\n  inject: ['pushMessageState'],\n  data() {\n    return {\n      products: [],\n      pagination: {},\n      tempProduct: {},\n      isNew: false,\n      isLoading: false,\n    };\n  },\n  methods: {\n    async getProducts(page = 1) {\n      // Show loading overlay\n      this.isLoading = true;\n      await apiGetProductListByPage(page)\n        .then((res) => {\n          if (res.data.success) {\n            this.products = res.data.products;\n            this.pagination = res.data.pagination;\n            console.log(res);\n          }\n        })\n        .catch((err) => console.log(err));\n\n      // Hide loading overlay\n      this.isLoading = false;\n    },\n    openModal(isNew, item) {\n      // Case 1: Add a new product (is NOT new); Case 2: Edit the product (is New)\n      this.tempProduct = isNew ? {} : item;\n      this.isNew = isNew;\n      this.$refs.productModal.showModal();\n    },\n    openDeleteModal(item) {\n      this.tempProduct = item;\n      this.$refs.deleteModal.showModal();\n    },\n    async updateProduct(item) {\n      this.tempProduct = item;\n\n      // Show loading overlay\n      this.isLoading = true;\n\n      // 建立產品\n      if (this.isNew) {\n        await apiPostProductItem({ data: this.tempProduct })\n          .then((res) => {\n            console.log('商品建立結果', res);\n            this.pushMessageState(res, '產品資料更新');\n          })\n          .catch((err) => console.log(err));\n      }\n      // 更新產品\n      if (!this.isNew) {\n        await apiPutProductItemDetail({ data: this.tempProduct }, item.id)\n          .then((res) => {\n            console.log('商品更新結果', res);\n            this.pushMessageState(res, '產品資料更新');\n          })\n          .catch((err) => console.log(err));\n      }\n\n      this.isLoading = false;\n      this.$refs.productModal.hideModal();\n      this.getProducts();\n    },\n    async deleteProduct(item) {\n      // Show loading overlay\n      this.isLoading = true;\n\n      await apiDeleteProduct(item.id)\n        .then((res) => {\n          console.log(res);\n          this.pushMessageState(res, '產品資料刪除');\n        })\n        .catch((err) => console.log(err));\n\n      // Loading effect off\n      this.isLoading = false;\n      this.$refs.deleteModal.hideModal();\n      this.getProducts();\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"exampleModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>新增產品</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-4\">\n              <div class=\"mb-3\">\n                <label for=\"image\" class=\"form-label w-100\"\n                  >輸入圖片網址\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"image\"\n                    placeholder=\"請輸入圖片連結\"\n                    v-model=\"tempProduct.imageUrl\"\n                /></label>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"majorImage\" class=\"form-label w-100\">\n                  <p>上傳主要圖片</p>\n                  <i class=\"fas fa-spinner fa-spin\"></i>\n                  <input\n                    type=\"file\"\n                    id=\"majorImage\"\n                    class=\"form-control\"\n                    @change=\"uploadFile('major')\"\n                    ref=\"majorImageInput\"\n                  />\n                </label>\n              </div>\n              <div class=\"mb-3\" v-for=\"index in 5\" :key=\"index\">\n                <label :for=\"`minorImage${index}`\" class=\"form-label w-100\">\n                  上傳次要圖片 {{ index }}\n                  <i class=\"fas fa-spinner fa-spin\"></i>\n                  <input\n                    type=\"file\"\n                    :id=\"`minorImage${index}`\"\n                    class=\"form-control\"\n                    @change=\"uploadFile('minor', index)\"\n                    ref=\"minorImageInput\"\n                  />\n                </label>\n              </div>\n            </div>\n            <div class=\"col-sm-8\">\n              <div class=\"mb-3\">\n                <label for=\"title\" class=\"form-label w-100\"\n                  >標題\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"title\"\n                    placeholder=\"請輸入標題\"\n                    v-model=\"tempProduct.title\"\n                  />\n                </label>\n              </div>\n\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"category\" class=\"form-label w-100\"\n                    >分類\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"category\"\n                      placeholder=\"請輸入分類\"\n                      v-model=\"tempProduct.category\"\n                    />\n                  </label>\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label w-100\"\n                    >單位\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"unit\"\n                      placeholder=\"請輸入單位\"\n                      v-model=\"tempProduct.unit\"\n                    />\n                  </label>\n                </div>\n              </div>\n\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"origin_price\" class=\"form-label w-100\"\n                    >原價\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"origin_price\"\n                      placeholder=\"請輸入原價\"\n                      v-model=\"tempProduct.origin_price\"\n                    />\n                  </label>\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label w-100\"\n                    >售價\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"price\"\n                      placeholder=\"請輸入售價\"\n                      v-model=\"tempProduct.price\"\n                    />\n                  </label>\n                </div>\n              </div>\n              <hr />\n\n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label w-100\"\n                  >產品描述\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"description\"\n                    placeholder=\"請輸入產品描述\"\n                    v-model=\"tempProduct.description\"\n                  ></textarea>\n                </label>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"content\" class=\"form-label w-100\"\n                  >說明內容\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"content\"\n                    placeholder=\"請輸入產品說明內容\"\n                    v-model=\"tempProduct.content\"\n                  ></textarea>\n                </label>\n              </div>\n              <div class=\"mb-3\">\n                <div class=\"form-check\">\n                  <label class=\"form-check-label\" for=\"is_enabled\">\n                    <input\n                      class=\"form-check-input\"\n                      type=\"checkbox\"\n                      :true-value=\"1\"\n                      :false-value=\"0\"\n                      id=\"is_enabled\"\n                      v-model=\"tempProduct.is_enabled\"\n                    />\n                    是否啟用\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">\n            取消\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-primary\"\n            @click=\"$emit('update-product', tempProduct)\"\n          >\n            確認\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { apiPostUploadImage } from '@/api/admin';\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  mixins: [modalMixin],\n  props: {\n    product: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      modal: {},\n      tempProduct: {},\n    };\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n      if (!this.tempProduct.imagesUrl) this.tempProduct.imagesUrl = [];\n    },\n  },\n  methods: {\n    uploadFile(type, key) {\n      const index = key - 1; // Array index starting from zero\n\n      const uploadedFile =\n        type === 'major'\n          ? this.$refs.majorImageInput.files[0]\n          : this.$refs.minorImageInput[index].files[0];\n\n      const formData = new FormData(); // 2. 轉成 form-data格式\n      formData.append('file-to-upload', uploadedFile);\n\n      apiPostUploadImage(formData)\n        .then((res) => {\n          if (!res.data.success) return;\n          if (type === 'major') this.tempProduct.imageUrl = res.data.imageUrl;\n          if (type === 'minor') this.tempProduct.imagesUrl[index] = res.data.imageUrl;\n        })\n        .catch((err) => console.log(err));\n    },\n  },\n};\n</script>\n","import { render } from \"./DashboardModalProduct.vue?vue&type=template&id=2cbafd1a\"\nimport script from \"./DashboardModalProduct.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardModalProduct.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\rainb\\\\Desktop\\\\vue-project\\\\CHIRP-thermos\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DashboardProducts.vue?vue&type=template&id=d9a7cec2\"\nimport script from \"./DashboardProducts.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardProducts.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\rainb\\\\Desktop\\\\vue-project\\\\CHIRP-thermos\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","width","_createVNode","_component_LoadingOverlay","active","$data","type","onClick","$options","_hoisted_3","_createElementBlock","_Fragment","_renderList","item","key","id","_toDisplayString","category","title","origin_price","toLocaleString","price","is_enabled","_hoisted_9","_hoisted_10","_component_ThePagination","pages","onEmitPage","_component_DashboardModalProduct","ref","product","onUpdateProduct","_component_DashboardModalDelete","onDeleteItem","tabindex","role","for","_hoisted_4","placeholder","imageUrl","$event","_hoisted_13","_hoisted_14","onChange","index","unit","_hoisted_36","description","content","_hoisted_48","_ctx","mixins","modalMixin","props","Object","default","data","modal","tempProduct","watch","this","imagesUrl","methods","uploadFile","uploadedFile","$refs","majorImageInput","files","minorImageInput","formData","FormData","append","apiPostUploadImage","then","res","success","catch","err","console","log","__exports__","components","DashboardModalProduct","DashboardModalDelete","ThePagination","inject","products","pagination","isNew","isLoading","async","page","apiGetProductListByPage","openModal","productModal","showModal","openDeleteModal","deleteModal","apiPostProductItem","pushMessageState","apiPutProductItemDetail","hideModal","getProducts","apiDeleteProduct","created","render"],"sourceRoot":""}