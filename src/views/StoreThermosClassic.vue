<template>
  <main class="container-fluid showcase showcase--bg-radius h-100">
    <article
      id="my-article"
      style="z-index: 2"
      class="
        row
        showcase__content
        showcase__content--is-first
        showcase__content--position-center
        position-sticky
        start-0
        top-0
        overflow-hidden
      "
      ref="firstArticle"
    >
      <section
        class="
          col-7 col-md-4
          feature
          flex-column
          justify-content-between
          mt-4
          p-0
          feature--position-mobile
          d-flex
          feature__layout--animation-scrolldown
        "
      >
        <div class="feature__description feature__description--position-end">
          <!-- <div class="line">
                  <span></span>
                </div> -->
          <h2 class="heading heading__badge heading__badge--position-front">
            第一行文字字 <br />
            第二行文字 <br />
            第三行文字文字文字
          </h2>
          <p class="paragraph">
            後自地作法畫法裡然政：精指條提長<br />
            氣理不走皮開動。電花飛主人各<br />
            散他有年演那臺麼子。
          </p>
          <span class="paragraph paragraph--size-sm"
            >※黑空確，友市才部這的我的你是友流子去班終以主這道他好空灣為更</span
          >
        </div>
        <img
          class="
            feature__image
            feature__image--size-flex
            feature__image--position-end
            d-none d-md-flex
          "
          src="../assets/images/bottle_open_hookers_green.png"
          alt="胡克綠保溫瓶"
        />
      </section>
      <section
        class="
          col-4
          merchandise
          m-auto
          text-center
          p-0
          d-flex
          align-items-center
          flex-column
          merchandise__layout--animation-scrolldown
        "
      >
        <img
          class="merchandise__image merchandise__image--size-flex z-index-2"
          src="../assets/images/showcase_hookers_green.png"
          alt="胡克綠保溫瓶"
        />
        <button
          type="button"
          class="btn btn-outline-secondary btn--theme-classic mt-3 mt-sm-4"
        >
          查看更多
        </button>
      </section>

      <section
        class="
          col-4
          accessory
          p-0
          flex-column
          align-items-end
          justify-content-between
          d-none d-md-flex
          accessory__layout--animation-scrolldown
        "
      >
        <img
          class="
            accessory__image
            accessory__image--size-flex
            accessory__image--slide-left
          "
          src="../assets/images/bottle_cap_hookers_green.png"
          alt="胡克綠保溫瓶瓶蓋"
        />
        <div class="accessory__description align-self-start me-4 mt-4">
          <!-- <div class="line">
                  <span></span>
                </div> -->
          <h2 class="heading">
            第一行文字字文字 <br />
            第二行文字文字文字文字 <br />
          </h2>
          <p class="paragraph">
            黑空確，友市才部這的我的你是友流子去班終以主這道他好
          </p>
          <span class="paragraph paragraph--size-sm"
            >※黑空確，友市才部這的我的你是友流子去班終以主這道他好空灣為更</span
          >
        </div>
        <div class="benefit benefit--slide-topleft d-flex align-items-end">
          <div class="benefit__description">
            <p class="paragraph paragraph--size-sm">※最長可保溫24小時</p>
          </div>
          <img
            class="
              benefit__image
              benefit__image--size-flex
              benefit__image--position-flex
            "
            src="../assets/images/benefit_hookers_green.png"
            alt="胡克綠保溫瓶保溫效果圖"
          />
        </div>
      </section>
      <!-- <div class="switch-nav"></div> -->
    </article>
    <article
      style="z-index: 1"
      class="
        row
        showcase__content
        showcase__content--size-vh
        showcase__content--position-center
        vh-100
        top-0
        position-fixed
        w-100
        overflow-hidden
      "
    >
      <section
        class="
          col-7 col-md-4
          feature
          flex-column
          justify-content-between
          mt-4
          p-0
          feature--position-mobile
          d-flex
          feature__layout--animation-scrolldown
        "
      >
        <div class="feature__description feature__description--position-end">
          <!-- <div class="line">
                  <span></span>
                </div> -->
          <h2 class="heading heading__badge heading__badge--position-front">
            第一行文字字 <br />
            第二行文字 <br />
            第三行文字文字文字
          </h2>
          <p class="paragraph">
            後自地作法畫法裡然政：精指條提長<br />
            氣理不走皮開動。電花飛主人各<br />
            散他有年演那臺麼子。
          </p>
          <span class="paragraph paragraph--size-sm"
            >※黑空確，友市才部這的我的你是友流子去班終以主這道他好空灣為更</span
          >
        </div>
        <img
          class="
            feature__image
            feature__image--size-flex
            feature__image--position-end
            d-none d-md-flex
          "
          src="../assets/images/bottle_open_old_rose.png"
          alt="胡克綠保溫瓶"
        />
      </section>
      <section
        class="
          col-4
          merchandise
          m-auto
          text-center
          p-0
          d-flex
          align-items-center
          flex-column
          merchandise__layout--animation-scrolldown
        "
      >
        <img
          class="merchandise__image merchandise__image--size-flex z-index-2"
          src="../assets/images/showcase_old_rose.png"
          alt="胡克綠保溫瓶"
        />
        <button
          type="button"
          class="btn btn-outline-secondary btn--theme-classic mt-3 mt-sm-4"
        >
          查看更多
        </button>
      </section>

      <section
        class="
          col-4
          accessory
          p-0
          flex-column
          align-items-end
          justify-content-between
          d-none d-md-flex
          accessory__layout--animation-scrolldown
        "
      >
        <img
          class="
            accessory__image
            accessory__image--size-flex
            accessory__image--slide-left
          "
          src="../assets/images/bottle_cap_old_rose.png"
          alt="胡克綠保溫瓶瓶蓋"
        />
        <div class="accessory__description align-self-start me-4 mt-4">
          <!-- <div class="line">
                  <span></span>
                </div> -->
          <h2 class="heading">
            第一行文字字文字 <br />
            第二行文字文字文字文字 <br />
          </h2>
          <p class="paragraph">
            黑空確，友市才部這的我的你是友流子去班終以主這道他好
          </p>
          <span class="paragraph paragraph--size-sm"
            >※黑空確，友市才部這的我的你是友流子去班終以主這道他好空灣為更</span
          >
        </div>
        <div class="benefit benefit--slide-topleft d-flex align-items-end">
          <div class="benefit__description">
            <p class="paragraph paragraph--size-sm">※最長可保溫24小時</p>
          </div>
          <img
            class="
              benefit__image
              benefit__image--size-flex
              benefit__image--position-flex
            "
            src="../assets/images/benefit_old_rose.png"
            alt="胡克綠保溫瓶保溫效果圖"
          />
        </div>
      </section>
      <!-- <div class="switch-nav"></div> -->
    </article>
    <section class="scroll-block p-0 position-static"></section>
  </main>
</template>

<script>
export default {
  data() {
    return {};
  },
  computed: {
    newHeight() {
      // return `${window.innerHeight - document.documentElement.scrollTop}`;
      return 5;
    },
  },
  methods: {
    // setDefaultHeight() {
    //   document.documentElement.style.setProperty(
    //     '--article-height',
    //     this.newHeight,
    //   );
    // },
    switchMerchandise() {
      const { innerHeight } = window;
      const { scrollTop } = document.documentElement;
      console.log(scrollTop);
      if (scrollTop < innerHeight) {
        // document.documentElement.style.setProperty(
        //   '--article-height',
        //   `${window.innerHeight - document.documentElement.scrollTop}px`,
        // );
        const newHeight = innerHeight - scrollTop;
        if (newHeight + scrollTop > innerHeight) {
          console.log('不要再卷了!');
        } else {
          document.getElementById('my-article').style.height = `${newHeight}px`;
        }
      }
      // if (document.documentElement.scrollTop > window.innerHeight) {
      // height = window.innerHeight;
      // }
    },
  },
  mounted() {
    document.documentElement.style.setProperty(
      '--article-height',
      `${window.innerHeight}px`,
    );
    document.addEventListener('scroll', this.switchMerchandise);
  },
};
</script>

<style lang="scss" scoped>
// Globe
::-moz-selection {
  /* Code for Firefox */
  background: yellow;
}

::selection {
  background: yellow;
}

.scroll-block {
  height: 100vh;
  background-color: palegoldenrod;
}

:root {
  --article-height: 0;
}

.heading {
  color: #383838;
  line-height: 2.875rem;
  text-decoration: underline;
  text-underline-offset: 0.1em;
  &__badge {
    &::before {
      display: flex;
      font-size: 0.8rem;
      width: 4.3125rem;
      height: 4.3125rem;
      border-radius: 50%;
      content: "臺灣MIT微笑標章";
      background-color: #000;
      color: white;
      text-align: center;
      align-items: center;
      line-height: 1.1rem;
      font-weight: 300;
      @media (max-width: 576px) {
        display: none;
      }
    }
    &--position {
      &-front {
        &::before {
          position: absolute;
          left: -80px;
        }
      }
    }
    &--color {
      &-green {
        &::before {
          background-color: #4d6d58;
        }
      }
      &-red {
        &::before {
          background-color: #cc7e85;
        }
      }
      &-blue {
        &::before {
          background-color: #496da5;
        }
      }
    }
  }
}

.paragraph {
  color: #383838;
  font-weight: 300;
  &--size {
    &-sm {
      font-size: 0.875rem;
    }
  }
}

.btn {
  &--theme-classic {
    border-radius: 30px;
    padding: 10px 25px;
  }
}

.showcase {
  &--bg-radius {
    background: rgb(248, 249, 250);
    background: radial-gradient(
      circle,
      rgba(248, 249, 250, 1) 13%,
      rgba(255, 255, 255, 1) 27%,
      rgba(248, 249, 250, 1) 42%
    );
  }
  &__content {
    &--is-first {
      height: var(--article-height);
    }
    &--size-vh {
      height: 100vh;
      @media (max-width: 992px) {
        height: 100vh;
      }
    }
    &--position-center {
      padding-top: 8rem;
    }
  }
}

.feature {
  &__layout {
    &--animation-scrolldown {
      position: absolute;
      height: 84vh;
    }
  }
  &--position-mobile {
    @media (max-width: 576px) {
      position: absolute;
    }
  }
  &__image {
    &--size-flex {
      max-width: 27.8vw;
      @media (max-width: 992px) {
        max-width: 33.8vw;
      }
    }
    &--position-end {
      // position: absolute;
      // top: 77vh;
      @media (max-width: 992px) {
        // top: 85vh;
      }
    }
  }
  &__description {
    &--position-end {
      position: relative;
      margin-left: 12vw;
    }
  }
}

.merchandise {
  &__layout {
    &--animation-scrolldown {
      transform: translateY(-50%);
      position: absolute;
      width: 100%;
      top: 53.5vh;
    }
  }
  &__image {
    width: auto;
    z-index: 1;
    &--size-flex {
      @media (min-width: 992px) and (max-width: 1200px) {
        max-width: 17vw;
      }
    }
  }
  &__btn {
    &--theme-classic {
      border-radius: 50%;
    }
  }
}

.accessory {
  &__layout {
    &--animation-scrolldown {
      position: absolute;
      right: 0;
      height: 84vh;
    }
  }
  &__image {
    position: relative;
    &--size-flex {
      max-width: 16vw;
      @media (max-width: 992px) {
        max-width: 20.8vw;
      }
    }
    &--slide-left {
      right: 5vw;
      // top: 1vw;
    }
  }
}

.benefit {
  position: relative;
  &--slide-topleft {
    right: 2vw;
    bottom: 3vw;
  }
  &__image {
    &--size-flex {
      max-width: 9vw;
      @media (max-width: 992px) {
        max-width: 16vw;
      }
    }
  }
}
</style>
