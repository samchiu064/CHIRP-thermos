{"version":3,"file":"js/667.49fb90bc.js","mappings":"2NAEA,MAAMA,EAAeC,IAAAA,OAAa,CAChCC,QAAU,0CAGZ,GAAIC,SAASC,OAAQ,CACnB,MAAMC,EAAQF,SAASC,OACpBE,MAAM,MACNC,MAAMC,GAAQA,EAAIC,WAAW,eAC7BH,MAAM,KAAK,GAEdN,EAAaU,aAAaC,QAAQC,KAC/BD,IACCA,EAAQE,QAAQC,cAAgBT,EACzBM,KAERI,GAAUC,QAAQC,OAAOF,KAIvB,MAAMG,EAAgBC,MAAAA,IAC3B,MAAMC,QAAepB,EAAaqB,KAAK,gBAAiBC,IAClD,MAAEjB,EAAF,QAASkB,GAAYH,EAAOE,KAOlC,OALAnB,SAASC,OAAU,cAAaC,gBAAoB,IAAImB,KAAKD,KAC7DtB,IAAAA,SAAAA,QAAAA,OAAAA,cAA8CI,EAE9CL,EAAayB,SAASZ,QAAQa,OAAOZ,cAAgBT,EAE9Ce,GAEIO,EAAiB,IAAM3B,EAAaqB,KAAK,WACzCO,EAAgB,IAAM5B,EAAaqB,KAAK,oB,mGChC9CQ,MAAM,kB,GAEFA,MAAM,Y,GACTC,EAAAA,EAAAA,GAAgD,MAA5CD,MAAM,8BAA6B,QAAI,G,GACtCA,MAAM,Q,GACFE,IAAI,aAAaF,MAAM,iB,WAC3B,kB,GAWAA,MAAM,Q,GACFE,IAAI,gBAAgBF,MAAM,iB,WAC9B,a,GAWLC,EAAAA,EAAAA,GAEM,OAFDD,MAAM,iBAAe,EACxBC,EAAAA,EAAAA,GAA0E,UAAlEE,KAAK,SAASH,MAAM,oCAAmC,QADjE,G,0CA9BNI,EAAAA,EAAAA,IAmCM,MAnCN,EAmCM,EAlCJH,EAAAA,EAAAA,GAiCO,QAjCDD,MAAM,6BAA8BK,SAAM,8BAAUC,EAAAA,QAAAA,EAAAA,UAAAA,IAAM,eAAhE,EACEL,EAAAA,EAAAA,GA+BM,MA/BN,EA+BM,CA9BJM,GACAN,EAAAA,EAAAA,GAYM,MAZN,EAYM,EAXJA,EAAAA,EAAAA,GAUQ,QAVR,EAUQ,aARNA,EAAAA,EAAAA,GAOE,SANAE,KAAK,QACLK,GAAG,aACHR,MAAM,eACNS,YAAY,gBACZC,SAAA,G,qCACSC,EAAAA,KAAKC,SAAQC,IANxB,iBAMWF,EAAAA,KAAKC,iBAIpBX,EAAAA,EAAAA,GAYM,MAZN,EAYM,EAXJA,EAAAA,EAAAA,GAUQ,QAVR,EAUQ,aARNA,EAAAA,EAAAA,GAOE,SANAE,KAAK,WACLK,GAAG,gBACHR,MAAM,eACNS,YAAY,WACZC,SAAA,G,qCACSC,EAAAA,KAAKG,SAAQD,IANxB,iBAMWF,EAAAA,KAAKG,gBAIpBC,KA7BJ,M,cAwCJ,GACEC,OAAQ,CAAC,oBACTvB,OACE,MAAO,CACLwB,KAAM,CACJL,SAAU,GACVE,SAAU,MAIhBI,QAAS,CACP5B,eACE,IACE,MAAMC,QAAeF,EAAAA,EAAAA,IAAc8B,KAAKF,MAEpC1B,EAAOE,KAAK2B,SACdD,KAAKE,QAAQC,KAAK,eAGpBH,KAAKI,iBAAiBhC,EAAQ,MAC9B,MAAOiC,GACPL,KAAKI,iBAAiBC,EAAK,U,QC1DnC,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://my-project/./src/api/adminLogon.js","webpack://my-project/./src/views/DashboardLogin.vue","webpack://my-project/./src/views/DashboardLogin.vue?fd5e"],"sourcesContent":["import axios from 'axios';\n\nconst logonRequest = axios.create({\n  baseURL: `${process.env.VUE_APP_API}/`,\n});\n\nif (document.cookie) {\n  const token = document.cookie\n    .split('; ')\n    .find((row) => row.startsWith('hexToken='))\n    .split('=')[1];\n\n  logonRequest.interceptors.request.use(\n    (request) => {\n      request.headers.Authorization = token;\n      return request;\n    },\n    (error) => Promise.reject(error)\n  );\n}\n\nexport const postUserLogin = async (data) => {\n  const result = await logonRequest.post('/admin/signin', data);\n  const { token, expired } = result.data;\n\n  document.cookie = `hexToken = ${token}; expires = ${new Date(expired)}`;\n  axios.defaults.headers.common.Authorization = token;\n\n  logonRequest.defaults.headers.common.Authorization = token;\n\n  return result;\n};\nexport const postUserLogout = () => logonRequest.post('/logout');\nexport const postUserCheck = () => logonRequest.post('/api/user/check');\n","<template>\n  <div class=\"container mt-5\">\n    <form class=\"row justify-content-center\" @submit.prevent=\"signin\">\n      <div class=\"col-md-6\">\n        <h1 class=\"h3 mb-3 font-weight-normal\">請先登入</h1>\n        <div class=\"mb-2\">\n          <label for=\"inputEmail\" class=\"sr-only w-100\"\n            >Email address\n            <input\n              type=\"email\"\n              id=\"inputEmail\"\n              class=\"form-control\"\n              placeholder=\"Email address\"\n              required\n              v-model=\"user.username\"\n            />\n          </label>\n        </div>\n        <div class=\"mb-2\">\n          <label for=\"inputPassword\" class=\"sr-only w-100\"\n            >Password\n            <input\n              type=\"password\"\n              id=\"inputPassword\"\n              class=\"form-control\"\n              placeholder=\"Password\"\n              required\n              v-model=\"user.password\"\n            />\n          </label>\n        </div>\n        <div class=\"text-end mt-4\">\n          <button type=\"submit\" class=\"btn btn-lg btn-primary btn-block\">登入</button>\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { postUserLogin } from '@/api/adminLogon';\n\nexport default {\n  inject: ['pushMessageState'],\n  data() {\n    return {\n      user: {\n        username: '',\n        password: '',\n      },\n    };\n  },\n  methods: {\n    async signin() {\n      try {\n        const result = await postUserLogin(this.user);\n\n        if (result.data.success) {\n          this.$router.push('/dashboard/');\n        }\n\n        this.pushMessageState(result, '登入');\n      } catch (err) {\n        this.pushMessageState(err, '登入');\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./DashboardLogin.vue?vue&type=template&id=47cb9cb8\"\nimport script from \"./DashboardLogin.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardLogin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\rainb\\\\Desktop\\\\vue-project\\\\CHIRP-thermos\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["logonRequest","axios","baseURL","document","cookie","token","split","find","row","startsWith","interceptors","request","use","headers","Authorization","error","Promise","reject","postUserLogin","async","result","post","data","expired","Date","defaults","common","postUserLogout","postUserCheck","class","_createElementVNode","for","type","_createElementBlock","onSubmit","$options","_hoisted_3","id","placeholder","required","$data","username","$event","password","_hoisted_10","inject","user","methods","this","success","$router","push","pushMessageState","err","__exports__","render"],"sourceRoot":""}